<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="A set of tools for eye data processing. The intended flow is
    from data processing, to fixation analysis, to data visualisation and
    trial level summaries.">
<title>Tools for eye data analysis • eyetools</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="apple-touch-icon-60x60.png">
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Tools for eye data analysis">
<meta property="og:description" content="A set of tools for eye data processing. The intended flow is
    from data processing, to fixation analysis, to data visualisation and
    trial level summaries.">
<meta property="og:image" content="https://tombeesley.github.io/eyetools/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="index.html">eyetools</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.6.1</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="articles/eyetools.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="articles/Animating-eyetools-data.html">Animating eyetools data</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9">
<div class="section level1">
<div class="page-header">
<img src="logo.png" class="logo" alt=""><h1 id="eyetools">
<strong>eyetools</strong><a class="anchor" aria-label="anchor" href="#eyetools"></a>
</h1>
</div>
<div class="section level2">
<h2 id="a-set-of-tools-for-eye-data-processing-analysis-and-visualisation-in-r">A set of tools for eye data processing, analysis and visualisation in R<a class="anchor" aria-label="anchor" href="#a-set-of-tools-for-eye-data-processing-analysis-and-visualisation-in-r"></a>
</h2>
<p><strong>eyetools</strong> is a package that provides a set of simple tools that will facilitate common steps in the processing and analysis of eye data. It is intended for use with data from psychological experiments. The idea is to have a workflow which is aided by these functions, going from processing of the raw data, to extraction of event related data (i.e., fixations, saccades), to summarising those data at the trial level (e.g., time on areas of interest).</p>
<p><strong>Warning - still in somewhat experimental form! Please check results carefully</strong></p>
<p>to install: <code>devtools::install_github("tombeesley/eyetools")</code></p>
<p>It is free to use under the GNU General Public Licence.</p>
<p>Available functions:</p>
<table class="table">
<colgroup>
<col width="19%">
<col width="80%">
</colgroup>
<thead><tr class="header">
<th>Implemented functions</th>
<th>Description</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code><a href="reference/AOI_seq.html">AOI_seq()</a></code></td>
<td>Detect the sequence in which AOIs were entered in a trial</td>
</tr>
<tr class="even">
<td><code><a href="reference/AOI_time.html">AOI_time()</a></code></td>
<td>Time on AOIs; works with rectangular and circular AOIs; works with raw and fixation data</td>
</tr>
<tr class="odd">
<td><code><a href="reference/combine_eyes.html">combine_eyes()</a></code></td>
<td>Combines binocular data (i.e., average or “best eye”)</td>
</tr>
<tr class="even">
<td><code><a href="reference/compare_algorithms.html">compare_algorithms()</a></code></td>
<td>Provides a comparison between the dispersion and VTI fixation algorithms with correlations and plot</td>
</tr>
<tr class="odd">
<td><code>conditional_transform</code></td>
<td>Implements a single-axis flip for specific trials to normalise data with counterbalanced designs</td>
</tr>
<tr class="even">
<td><code><a href="reference/fixation_dispersion.html">fixation_dispersion()</a></code></td>
<td>Dispersion algorithm for fixation detection</td>
</tr>
<tr class="odd">
<td><code><a href="reference/fixation_VTI.html">fixation_VTI()</a></code></td>
<td>An inverse saccade algorithm for fixation detection</td>
</tr>
<tr class="even">
<td><code><a href="reference/hdf5_to_csv.html">hdf5_to_csv()</a></code></td>
<td>converts eyetracking data retrieved from TOBII eyetrackers to csv</td>
</tr>
<tr class="odd">
<td><code><a href="reference/interpolate.html">interpolate()</a></code></td>
<td>Interpolates data across gaps; provides a summary report of repair</td>
</tr>
<tr class="even">
<td><code><a href="reference/plot_seq.html">plot_seq()</a></code></td>
<td>provides a 2D plot of raw data in one trial. Data can be split into time bins</td>
</tr>
<tr class="odd">
<td><code><a href="reference/plot_spatial.html">plot_spatial()</a></code></td>
<td>provides a 2D plot of raw data, fixations, saccades, and AOIs</td>
</tr>
<tr class="even">
<td><code><a href="reference/saccade_VTI.html">saccade_VTI()</a></code></td>
<td>Velocity threshold algorithm for saccade detection. Provides summary of velocity, start/end, duration</td>
</tr>
<tr class="odd">
<td><code><a href="reference/smoother.html">smoother()</a></code></td>
<td>smooths data for use in saccade algorithms</td>
</tr>
</tbody>
</table>
</div>
<div class="section level2">
<h2 id="how-to-use-eyetools-work-in-progress">How to use eyetools (work in progress)<a class="anchor" aria-label="anchor" href="#how-to-use-eyetools-work-in-progress"></a>
</h2>
<div class="section level3">
<h3 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h3>
<p>You can install eyetools using the following code:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="va"><a href="https://devtools.r-lib.org/" class="external-link">devtools</a></span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"devtools"</span><span class="op">)</span></span>
<span>  <span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://devtools.r-lib.org/" class="external-link">devtools</a></span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"tombeesley/eyetools"</span><span class="op">)</span></span></code></pre></div>
<p>and then load it:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tombeesley.github.io/eyetools/">eyetools</a></span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="the-format-of-raw-data">The format of raw data<a class="anchor" aria-label="anchor" href="#the-format-of-raw-data"></a>
</h3>
<p>Data needs to be in a particular format to be compatible with the functions in eyetools. This format is 4 columns of data, with each row representing a sample. The four columns are: time, x, y, and trial. You can see an example with the built in data sets:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">example_raw_sac</span></span></code></pre></div>
<div class="sourceCode" id="cb4"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="do">## # A tibble: 32,608 × 4</span></span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a><span class="do">##     time     x     y trial</span></span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a><span class="do">##    &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span></span>
<span id="cb4-4"><a href="#cb4-4" tabindex="-1"></a><span class="do">##  1     0  940.  535.     1</span></span>
<span id="cb4-5"><a href="#cb4-5" tabindex="-1"></a><span class="do">##  2     3  940.  536.     1</span></span>
<span id="cb4-6"><a href="#cb4-6" tabindex="-1"></a><span class="do">##  3     7  936.  533.     1</span></span>
<span id="cb4-7"><a href="#cb4-7" tabindex="-1"></a><span class="do">##  4    10  939.  536.     1</span></span>
<span id="cb4-8"><a href="#cb4-8" tabindex="-1"></a><span class="do">##  5    13  944.  533.     1</span></span>
<span id="cb4-9"><a href="#cb4-9" tabindex="-1"></a><span class="do">##  6    17  939.  535.     1</span></span>
<span id="cb4-10"><a href="#cb4-10" tabindex="-1"></a><span class="do">##  7    20  938.  531.     1</span></span>
<span id="cb4-11"><a href="#cb4-11" tabindex="-1"></a><span class="do">##  8    23  939.  536.     1</span></span>
<span id="cb4-12"><a href="#cb4-12" tabindex="-1"></a><span class="do">##  9    27  940.  534.     1</span></span>
<span id="cb4-13"><a href="#cb4-13" tabindex="-1"></a><span class="do">## 10    30  942.  537.     1</span></span>
<span id="cb4-14"><a href="#cb4-14" tabindex="-1"></a><span class="do">## # ℹ 32,598 more rows</span></span></code></pre></div>
<p><strong>Importantly</strong>, the data for each trial should be sequential and logical, that is, the timestamps should run continuously, without any gaps in the recording process. The eyetools package expects data to contain only data for a single participant; none of the functions handle the data for multiple participants in their present state.</p>
</div>
<div class="section level3">
<h3 id="repairing-data">Repairing data<a class="anchor" aria-label="anchor" href="#repairing-data"></a>
</h3>
<p>Raw data will often contain missing samples, which we can attempt to repair. eyetools has an <code><a href="reference/interpolate.html">interpolate()</a></code> function you can use to do this. It will produce a report of how successful the repair was in terms of the missing data before and after interpolation:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/interpolate.html">interpolate</a></span><span class="op">(</span><span class="va">example_raw_sac</span>, report <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb6"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="do">## [[1]]</span></span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a><span class="do">## # A tibble: 32,608 × 4</span></span>
<span id="cb6-3"><a href="#cb6-3" tabindex="-1"></a><span class="do">##     time     x     y trial</span></span>
<span id="cb6-4"><a href="#cb6-4" tabindex="-1"></a><span class="do">##    &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span></span>
<span id="cb6-5"><a href="#cb6-5" tabindex="-1"></a><span class="do">##  1     0  940.  535.     1</span></span>
<span id="cb6-6"><a href="#cb6-6" tabindex="-1"></a><span class="do">##  2     3  940.  536.     1</span></span>
<span id="cb6-7"><a href="#cb6-7" tabindex="-1"></a><span class="do">##  3     7  936.  533.     1</span></span>
<span id="cb6-8"><a href="#cb6-8" tabindex="-1"></a><span class="do">##  4    10  939.  536.     1</span></span>
<span id="cb6-9"><a href="#cb6-9" tabindex="-1"></a><span class="do">##  5    13  944.  533.     1</span></span>
<span id="cb6-10"><a href="#cb6-10" tabindex="-1"></a><span class="do">##  6    17  939.  535.     1</span></span>
<span id="cb6-11"><a href="#cb6-11" tabindex="-1"></a><span class="do">##  7    20  938.  531.     1</span></span>
<span id="cb6-12"><a href="#cb6-12" tabindex="-1"></a><span class="do">##  8    23  939.  536.     1</span></span>
<span id="cb6-13"><a href="#cb6-13" tabindex="-1"></a><span class="do">##  9    27  940.  534.     1</span></span>
<span id="cb6-14"><a href="#cb6-14" tabindex="-1"></a><span class="do">## 10    30  942.  537.     1</span></span>
<span id="cb6-15"><a href="#cb6-15" tabindex="-1"></a><span class="do">## # ℹ 32,598 more rows</span></span>
<span id="cb6-16"><a href="#cb6-16" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb6-17"><a href="#cb6-17" tabindex="-1"></a><span class="do">## [[2]]</span></span>
<span id="cb6-18"><a href="#cb6-18" tabindex="-1"></a><span class="do">## # A tibble: 1 × 2</span></span>
<span id="cb6-19"><a href="#cb6-19" tabindex="-1"></a><span class="do">##   missing_perc_before missing_perc_after</span></span>
<span id="cb6-20"><a href="#cb6-20" tabindex="-1"></a><span class="do">##                 &lt;dbl&gt;              &lt;dbl&gt;</span></span>
<span id="cb6-21"><a href="#cb6-21" tabindex="-1"></a><span class="do">## 1              0.0998             0.0952</span></span></code></pre></div>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">raw_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/interpolate.html">interpolate</a></span><span class="op">(</span><span class="va">example_raw_sac</span><span class="op">)</span> <span class="co"># store as new object</span></span></code></pre></div>
<p>We can also apply a smoothing function (<code><a href="reference/smoother.html">smoother()</a></code>) over the data, which is particularly important for the analysis of saccadic velocities.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">smooth_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/smoother.html">smoother</a></span><span class="op">(</span><span class="va">example_raw_sac</span><span class="op">)</span> </span></code></pre></div>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org" class="external-link">tidyverse</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">r</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">raw_data</span>, <span class="va">trial</span> <span class="op">==</span> <span class="fl">2</span><span class="op">)</span></span>
<span><span class="va">s</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">smooth_data</span>, <span class="va">trial</span> <span class="op">==</span> <span class="fl">2</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">r</span>, </span>
<span>            <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">time</span>, y <span class="op">=</span> <span class="va">y</span><span class="op">)</span>,</span>
<span>            colour <span class="op">=</span> <span class="st">"red"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">s</span>, </span>
<span>            <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">time</span>, y <span class="op">=</span> <span class="va">y</span><span class="op">)</span>,</span>
<span>            colour <span class="op">=</span> <span class="st">"blue"</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/unnamed-chunk-7-1.png"><!-- --></p>
</div>
<div class="section level3">
<h3 id="processing-fixations">Processing fixations<a class="anchor" aria-label="anchor" href="#processing-fixations"></a>
</h3>
<p>The function <code><a href="reference/fixation_dispersion.html">fixation_dispersion()</a></code> is a dispersion-based algorithm for identifying fixations, based on the algorithm described in Salvucci and Goldberg (2000). Passing raw data to this will return a data frame with the fixations ordered by trial and by fixation sequence, with the averaged x and y coordinates, timestamps and duration. The “min_dur” parameter will restrict to fixations over a certain duration. The “disp_tol” parameter sets the tolerance for the dispersion of data within a fixation. Exploratory analysis of the data will be needed to find suitable values for these.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">raw_data_f</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">raw_data</span>, <span class="va">trial</span> <span class="op">&lt;=</span> <span class="fl">3</span><span class="op">)</span> <span class="co"># get a sample of trials</span></span>
<span></span>
<span><span class="fu"><a href="reference/fixation_dispersion.html">fixation_dispersion</a></span><span class="op">(</span><span class="va">raw_data_f</span>, min_dur <span class="op">=</span> <span class="fl">120</span>, disp_tol <span class="op">=</span> <span class="fl">100</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb11"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="do">##    trial fix_n start  end duration    x   y prop_NA min_dur disp_tol</span></span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a><span class="do">## 1      1     1     0  230      230  937 535   0.000     120      100</span></span>
<span id="cb11-3"><a href="#cb11-3" tabindex="-1"></a><span class="do">## 2      1     2   273  460      187  170 500   0.000     120      100</span></span>
<span id="cb11-4"><a href="#cb11-4" tabindex="-1"></a><span class="do">## 3      1     3   643 1180      537 1743 534   0.000     120      100</span></span>
<span id="cb11-5"><a href="#cb11-5" tabindex="-1"></a><span class="do">## 4      1     4  1306 1426      120  252 503   0.243     120      100</span></span>
<span id="cb11-6"><a href="#cb11-6" tabindex="-1"></a><span class="do">## 5      1     5  1536 1656      120  131 530   0.243     120      100</span></span>
<span id="cb11-7"><a href="#cb11-7" tabindex="-1"></a><span class="do">## 6      1     6  1660 1816      156  135 533   0.000     120      100</span></span>
<span id="cb11-8"><a href="#cb11-8" tabindex="-1"></a><span class="do">## 7      2     1     0  230      230  938 539   0.000     120      100</span></span>
<span id="cb11-9"><a href="#cb11-9" tabindex="-1"></a><span class="do">## 8      2     2   273  407      134  201 515   0.000     120      100</span></span>
<span id="cb11-10"><a href="#cb11-10" tabindex="-1"></a><span class="do">## 9      2     3   410  767      357  143 522   0.000     120      100</span></span>
<span id="cb11-11"><a href="#cb11-11" tabindex="-1"></a><span class="do">## 10     2     4   940 1070      130 1696 527   0.000     120      100</span></span>
<span id="cb11-12"><a href="#cb11-12" tabindex="-1"></a><span class="do">## 11     2     5  1073 1247      174 1739 535   0.000     120      100</span></span>
<span id="cb11-13"><a href="#cb11-13" tabindex="-1"></a><span class="do">## 12     3     1     0  167      167  941 543   0.000     120      100</span></span>
<span id="cb11-14"><a href="#cb11-14" tabindex="-1"></a><span class="do">## 13     3     2   210  533      323  159 521   0.000     120      100</span></span>
<span id="cb11-15"><a href="#cb11-15" tabindex="-1"></a><span class="do">## 14     3     3   623  743      120 1673 519   0.243     120      100</span></span>
<span id="cb11-16"><a href="#cb11-16" tabindex="-1"></a><span class="do">## 15     3     4   747 1097      350 1732 547   0.000     120      100</span></span>
<span id="cb11-17"><a href="#cb11-17" tabindex="-1"></a><span class="do">## 16     3     5  1187 1307      120  211 543   0.243     120      100</span></span></code></pre></div>
<p>The function <code><a href="reference/fixation_VTI.html">fixation_VTI()</a></code> is an inverse saccade-based algorithm and offers an alternative algorithm for identifying fixations. The saccade detection is based on the “velocity threshold identification” algorithm (Salvucci and Goldberg, 2000) and then checks the dispersion of the fixations. As with <code><a href="reference/fixation_dispersion.html">fixation_dispersion()</a></code>, passing raw data will return an ordered data frame by trial and fixation event.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/fixation_VTI.html">fixation_VTI</a></span><span class="op">(</span><span class="va">raw_data_f</span>, min_dur <span class="op">=</span> <span class="fl">120</span>, disp_tol <span class="op">=</span> <span class="fl">100</span>, min_dur_sac <span class="op">=</span> <span class="fl">20</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb13"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="do">##    trial fix_n start  end duration         x        y min_dur disp_tol</span></span>
<span id="cb13-2"><a href="#cb13-2" tabindex="-1"></a><span class="do">## 1      1     1     0  227      227  938.5558 534.7634     120      100</span></span>
<span id="cb13-3"><a href="#cb13-3" tabindex="-1"></a><span class="do">## 2      1     2   263  460      197  173.3073 499.6146     120      100</span></span>
<span id="cb13-4"><a href="#cb13-4" tabindex="-1"></a><span class="do">## 3      1     3   653 1173      520 1744.0544 534.4384     120      100</span></span>
<span id="cb13-5"><a href="#cb13-5" tabindex="-1"></a><span class="do">## 4      1     4  1570 1810      240  132.9872 530.3760     120      100</span></span>
<span id="cb13-6"><a href="#cb13-6" tabindex="-1"></a><span class="do">## 5      2     1     0  224      224  939.2441 539.4135     120      100</span></span>
<span id="cb13-7"><a href="#cb13-7" tabindex="-1"></a><span class="do">## 6      2     2   283  763      480  156.2593 519.9607     120      100</span></span>
<span id="cb13-8"><a href="#cb13-8" tabindex="-1"></a><span class="do">## 7      2     3   953 1247      294 1722.0600 531.8271     120      100</span></span>
<span id="cb13-9"><a href="#cb13-9" tabindex="-1"></a><span class="do">## 8      3     1     0  190      190  935.5209 542.3868     120      100</span></span>
<span id="cb13-10"><a href="#cb13-10" tabindex="-1"></a><span class="do">## 9      3     2   207  530      323  158.8915 521.1675     120      100</span></span>
<span id="cb13-11"><a href="#cb13-11" tabindex="-1"></a><span class="do">## 10     3     3   657 1093      436 1719.7962 541.7855     120      100</span></span>
<span id="cb13-12"><a href="#cb13-12" tabindex="-1"></a><span class="do">## 11     3     4  1220 1353      133  215.9420 543.5276     120      100</span></span></code></pre></div>
<p>It is also possible to <code><a href="reference/compare_algorithms.html">compare_algorithms()</a></code>. This returns a plot (if desired) that shows the fixations detected (in terms of time) for each algorithm in each trial and returns by default a dataframe of the percentage of data tagged as a fixation, the number of fixations, as well as the correlation of whether timepoints are classified as a fixation. The stored object that results from <code><a href="reference/compare_algorithms.html">compare_algorithms()</a></code> is a list of three. Item 1 is the same printed dataframe seen below. The second object is a further list of the correlations made using <code><a href="https://rdrr.io/r/stats/cor.test.html" class="external-link">cor.test()</a></code> (of which the values are stored in object one), and the final object is the data required to reproduce the plot.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">comparison</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/compare_algorithms.html">compare_algorithms</a></span><span class="op">(</span><span class="va">raw_data_f</span>, min_dur <span class="op">=</span> <span class="fl">120</span>, disp_tol <span class="op">=</span> <span class="fl">100</span>, min_dur_sac <span class="op">=</span> <span class="fl">20</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/unnamed-chunk-10-1.png"><!-- --></p>
<div class="sourceCode" id="cb15"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a><span class="do">##    algorithm trial  percent fix_n    corr.r        corr.p   corr.t</span></span>
<span id="cb15-2"><a href="#cb15-2" tabindex="-1"></a><span class="do">## 1        vti     1 61.31261     4 0.7942199 6.036655e-127 31.39707</span></span>
<span id="cb15-3"><a href="#cb15-3" tabindex="-1"></a><span class="do">## 2 dispersion     1 69.94819     6 0.7942199 6.036655e-127 31.39707</span></span>
<span id="cb15-4"><a href="#cb15-4" tabindex="-1"></a><span class="do">## 3        vti     2 79.94652     3 0.8979390 1.178382e-134 39.35023</span></span>
<span id="cb15-5"><a href="#cb15-5" tabindex="-1"></a><span class="do">## 4 dispersion     2 82.08556     5 0.8979390 1.178382e-134 39.35023</span></span>
<span id="cb15-6"><a href="#cb15-6" tabindex="-1"></a><span class="do">## 5        vti     3 77.56563     4 0.6925860  3.919521e-61 19.60670</span></span>
<span id="cb15-7"><a href="#cb15-7" tabindex="-1"></a><span class="do">## 6 dispersion     3 77.32697     5 0.6925860  3.919521e-61 19.60670</span></span></code></pre></div>
<p>The code used to produce the plots within <code><a href="reference/compare_algorithms.html">compare_algorithms()</a></code> is shown below</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">comparison</span><span class="op">$</span><span class="va">plot</span>,</span>
<span>         <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span><span class="va">time</span>, <span class="va">name</span>, group <span class="op">=</span> <span class="va">event_n</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span>linewidth<span class="op">=</span><span class="fl">10</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html" class="external-link">facet_wrap</a></span><span class="op">(</span><span class="op">~</span><span class="va">trial</span>, dir<span class="op">=</span><span class="st">"v"</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_bw</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="plotting-data">Plotting data<a class="anchor" aria-label="anchor" href="#plotting-data"></a>
</h3>
<p>The function <code><a href="reference/plot_spatial.html">plot_spatial()</a></code> is a wrapper for a series of ggplot commands to plot both raw data and fixation summaries.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#library(patchwork)</span></span>
<span><span class="co"># patchwork is used here to plot adjacent figures</span></span>
<span></span>
<span><span class="va">t_raw</span> <span class="op">&lt;-</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">example_raw_sac</span>, <span class="va">trial</span> <span class="op">==</span> <span class="fl">9</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># process fixations</span></span>
<span><span class="va">t_fix</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/fixation_dispersion.html">fixation_dispersion</a></span><span class="op">(</span><span class="va">t_raw</span>, disp_tol <span class="op">=</span> <span class="fl">100</span>, min_dur <span class="op">=</span> <span class="fl">150</span><span class="op">)</span></span>
<span></span>
<span><span class="va">raw_plot</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/plot_spatial.html">plot_spatial</a></span><span class="op">(</span>raw_data <span class="op">=</span> <span class="va">t_raw</span>, plot_header <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="va">fixation_plot</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/plot_spatial.html">plot_spatial</a></span><span class="op">(</span>raw_data <span class="op">=</span> <span class="va">t_raw</span>, fix_data <span class="op">=</span> <span class="va">t_fix</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#raw_plot/fixation_plot # combined plot with patchwork</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="assessing-time-on-areas-of-interest">Assessing time on areas of interest<a class="anchor" aria-label="anchor" href="#assessing-time-on-areas-of-interest"></a>
</h3>
<p>The function <code><a href="reference/AOI_time.html">AOI_time()</a></code> can be used to calculate the time spent on areas of interest. Areas of interest need to be defined by the x and y centre points, and the width and height in pixels:</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">AOI_regions</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span>nrow <span class="op">=</span> <span class="fl">3</span>, ncol <span class="op">=</span> <span class="fl">4</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">AOI_regions</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"x"</span>, <span class="st">"y"</span>, <span class="st">"width_radius"</span>, <span class="st">"height"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">AOI_regions</span><span class="op">[</span><span class="fl">1</span>,<span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">960</span>, <span class="fl">540</span>, <span class="fl">300</span>, <span class="fl">300</span><span class="op">)</span> <span class="co"># X, Y, W, H - square</span></span>
<span><span class="va">AOI_regions</span><span class="op">[</span><span class="fl">2</span>,<span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">200</span>, <span class="fl">540</span>, <span class="fl">300</span>, <span class="fl">300</span><span class="op">)</span> <span class="co"># X, Y, W, H - square</span></span>
<span><span class="va">AOI_regions</span><span class="op">[</span><span class="fl">3</span>,<span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1720</span>, <span class="fl">540</span>, <span class="fl">300</span>, <span class="fl">300</span><span class="op">)</span> <span class="co"># X, Y, W, H - square</span></span></code></pre></div>
<p><code><a href="reference/AOI_time.html">AOI_time()</a></code> uses the fixation data as input to the function. In this example we are finding the time spent in 3 rectangular regions across the first 10 trials:</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">t_raw</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">example_raw_sac</span>, <span class="fu"><a href="https://dplyr.tidyverse.org/reference/between.html" class="external-link">between</a></span><span class="op">(</span><span class="va">trial</span>,<span class="fl">1</span>,<span class="fl">10</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># process fixations</span></span>
<span><span class="va">t_fix</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/fixation_dispersion.html">fixation_dispersion</a></span><span class="op">(</span><span class="va">t_raw</span>, disp_tol <span class="op">=</span> <span class="fl">100</span>, min_dur <span class="op">=</span> <span class="fl">150</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="reference/AOI_time.html">AOI_time</a></span><span class="op">(</span><span class="va">t_fix</span>, AOIs <span class="op">=</span> <span class="va">AOI_regions</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb20"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" tabindex="-1"></a><span class="do">##    trial AOI_1 AOI_2 AOI_3</span></span>
<span id="cb20-2"><a href="#cb20-2" tabindex="-1"></a><span class="do">## 1      1   230   337   537</span></span>
<span id="cb20-3"><a href="#cb20-3" tabindex="-1"></a><span class="do">## 2      2   230   487   304</span></span>
<span id="cb20-4"><a href="#cb20-4" tabindex="-1"></a><span class="do">## 3      3   167   473   477</span></span>
<span id="cb20-5"><a href="#cb20-5" tabindex="-1"></a><span class="do">## 4      4   283   370   349</span></span>
<span id="cb20-6"><a href="#cb20-6" tabindex="-1"></a><span class="do">## 5      5   246   360   363</span></span>
<span id="cb20-7"><a href="#cb20-7" tabindex="-1"></a><span class="do">## 6      6   200   217     0</span></span>
<span id="cb20-8"><a href="#cb20-8" tabindex="-1"></a><span class="do">## 7      7   150   337   797</span></span>
<span id="cb20-9"><a href="#cb20-9" tabindex="-1"></a><span class="do">## 8      8   180   346   853</span></span>
<span id="cb20-10"><a href="#cb20-10" tabindex="-1"></a><span class="do">## 9      9   174   260   496</span></span>
<span id="cb20-11"><a href="#cb20-11" tabindex="-1"></a><span class="do">## 10    10   197   150   826</span></span></code></pre></div>
<p>We can include the AOIs within our <code><a href="reference/plot_spatial.html">plot_spatial()</a></code>:</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">t_raw</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">example_raw_sac</span>, <span class="va">trial</span> <span class="op">==</span> <span class="fl">9</span><span class="op">)</span> <span class="co"># single trial for plotting purposes</span></span>
<span></span>
<span><span class="co"># process fixations</span></span>
<span><span class="va">t_fix</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/fixation_dispersion.html">fixation_dispersion</a></span><span class="op">(</span><span class="va">t_raw</span>, disp_tol <span class="op">=</span> <span class="fl">100</span>, min_dur <span class="op">=</span> <span class="fl">150</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="reference/plot_spatial.html">plot_spatial</a></span><span class="op">(</span>raw_data <span class="op">=</span> <span class="va">t_raw</span>, fix_data <span class="op">=</span> <span class="va">t_fix</span>, AOIs <span class="op">=</span> <span class="va">AOI_regions</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/unnamed-chunk-15-1.png"><!-- --></p>
<p>We can also define AOIs as circles by specifying the radius in the 3rd column and setting the 4th column to NA:</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">AOI_regions</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span>nrow <span class="op">=</span> <span class="fl">3</span>, ncol <span class="op">=</span> <span class="fl">4</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">AOI_regions</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"x"</span>, <span class="st">"y"</span>, <span class="st">"width_radius"</span>, <span class="st">"height"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">AOI_regions</span><span class="op">[</span><span class="fl">1</span>,<span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">960</span>, <span class="fl">540</span>, <span class="fl">150</span>, <span class="cn">NA</span><span class="op">)</span> <span class="co"># X, Y, R - circle</span></span>
<span><span class="va">AOI_regions</span><span class="op">[</span><span class="fl">2</span>,<span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">200</span>, <span class="fl">540</span>, <span class="fl">300</span>, <span class="fl">300</span><span class="op">)</span> <span class="co"># X, Y, W, H - square</span></span>
<span><span class="va">AOI_regions</span><span class="op">[</span><span class="fl">3</span>,<span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1720</span>, <span class="fl">540</span>, <span class="fl">300</span>, <span class="fl">300</span><span class="op">)</span> <span class="co"># X, Y, W, H - square</span></span>
<span></span>
<span><span class="va">t_raw</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">example_raw_sac</span>, <span class="fu"><a href="https://dplyr.tidyverse.org/reference/between.html" class="external-link">between</a></span><span class="op">(</span><span class="va">trial</span>,<span class="fl">1</span>,<span class="fl">10</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># process fixations</span></span>
<span><span class="va">t_fix</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/fixation_dispersion.html">fixation_dispersion</a></span><span class="op">(</span><span class="va">t_raw</span>, disp_tol <span class="op">=</span> <span class="fl">100</span>, min_dur <span class="op">=</span> <span class="fl">150</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="reference/plot_spatial.html">plot_spatial</a></span><span class="op">(</span>raw_data <span class="op">=</span> <span class="va">t_raw</span>, fix_data <span class="op">=</span> <span class="va">t_fix</span>, AOIs <span class="op">=</span> <span class="va">AOI_regions</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/unnamed-chunk-16-1.png"><!-- --></p>
<p>Circular AOIs are also handled by AOI_time and will produce different results to comparable rectangular AOIs. Here fixation 5 falls outside of the circular AOI, but within the region of the rectangular AOI:</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">AOI_regions</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span>nrow <span class="op">=</span> <span class="fl">2</span>, ncol <span class="op">=</span> <span class="fl">4</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">AOI_regions</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"x"</span>, <span class="st">"y"</span>, <span class="st">"width_radius"</span>, <span class="st">"height"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">AOI_regions</span><span class="op">[</span><span class="fl">1</span>,<span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">960</span>, <span class="fl">540</span>, <span class="fl">150</span>, <span class="cn">NA</span><span class="op">)</span> <span class="co"># X, Y, R - circle in centre</span></span>
<span><span class="va">AOI_regions</span><span class="op">[</span><span class="fl">2</span>,<span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">960</span>, <span class="fl">540</span>, <span class="fl">300</span>, <span class="fl">300</span><span class="op">)</span> <span class="co"># X, Y, W, H - square in centre</span></span>
<span></span>
<span><span class="va">t_raw</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">example_raw_sac</span>, <span class="va">trial</span> <span class="op">==</span> <span class="fl">13</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># process fixations</span></span>
<span><span class="va">t_fix</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/fixation_dispersion.html">fixation_dispersion</a></span><span class="op">(</span><span class="va">t_raw</span>, disp_tol <span class="op">=</span> <span class="fl">100</span>, min_dur <span class="op">=</span> <span class="fl">150</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="reference/plot_spatial.html">plot_spatial</a></span><span class="op">(</span>raw_data <span class="op">=</span> <span class="va">t_raw</span>, fix_data <span class="op">=</span> <span class="va">t_fix</span>, AOIs <span class="op">=</span> <span class="va">AOI_regions</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/unnamed-chunk-17-1.png"><!-- --></p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/AOI_time.html">AOI_time</a></span><span class="op">(</span><span class="va">t_fix</span>, AOIs <span class="op">=</span> <span class="va">AOI_regions</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb25"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" tabindex="-1"></a><span class="do">##   trial AOI_1 AOI_2</span></span>
<span id="cb25-2"><a href="#cb25-2" tabindex="-1"></a><span class="do">## 1    13   180   330</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="processing-saccades">Processing saccades<a class="anchor" aria-label="anchor" href="#processing-saccades"></a>
</h3>
<p>The function <code><a href="reference/saccade_VTI.html">saccade_VTI()</a></code> provides a means of processing the data for saccades, based on a “velocity threshold identification” algorithm, as described in Salvucci and Goldberg (2000). As described above, it is wise to use the <code><a href="reference/smoother.html">smoother()</a></code> function on the data first. THe sample rate can be set if known, or can be approximated using the timestamps in the data. The threshold determines the degrees of visual angle per second needed to indicate the presence of a saccadic eye-movement.</p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">t_raw</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">example_raw_sac</span>, <span class="fu"><a href="https://dplyr.tidyverse.org/reference/between.html" class="external-link">between</a></span><span class="op">(</span><span class="va">trial</span>,<span class="fl">1</span>,<span class="fl">10</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">t_smooth</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/smoother.html">smoother</a></span><span class="op">(</span><span class="va">t_raw</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="reference/saccade_VTI.html">saccade_VTI</a></span><span class="op">(</span><span class="va">t_smooth</span>, sample_rate <span class="op">=</span> <span class="fl">300</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb27"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" tabindex="-1"></a><span class="do">##    trialNumber sac_n start  end duration  origin_x origin_y terminal_x</span></span>
<span id="cb27-2"><a href="#cb27-2" tabindex="-1"></a><span class="do">## 1            1     1   223  287       64  870.3588 527.6547   177.1630</span></span>
<span id="cb27-3"><a href="#cb27-3" tabindex="-1"></a><span class="do">## 2            1     2   447  530       83  209.4739 500.0963  1423.6778</span></span>
<span id="cb27-4"><a href="#cb27-4" tabindex="-1"></a><span class="do">## 3            2     1   230  280       50  843.5225 537.3153   258.2328</span></span>
<span id="cb27-5"><a href="#cb27-5" tabindex="-1"></a><span class="do">## 4            2     2   757  840       83  184.2432 518.7122  1513.4706</span></span>
<span id="cb27-6"><a href="#cb27-6" tabindex="-1"></a><span class="do">## 5            3     1   163  217       54  864.0695 538.9868   188.6405</span></span>
<span id="cb27-7"><a href="#cb27-7" tabindex="-1"></a><span class="do">## 6            3     2   527  550       23  236.2502 533.8763   456.4131</span></span>
<span id="cb27-8"><a href="#cb27-8" tabindex="-1"></a><span class="do">## 7            3     3  1087 1120       33 1671.8701 542.0387  1278.9085</span></span>
<span id="cb27-9"><a href="#cb27-9" tabindex="-1"></a><span class="do">## 8            4     1   280  340       60  941.2610 525.2997   167.3127</span></span>
<span id="cb27-10"><a href="#cb27-10" tabindex="-1"></a><span class="do">## 9            4     2   696  730       34  193.3663 514.7454   638.2664</span></span>
<span id="cb27-11"><a href="#cb27-11" tabindex="-1"></a><span class="do">## 10           5     1   240  293       53  989.2586 539.9973  1655.2936</span></span>
<span id="cb27-12"><a href="#cb27-12" tabindex="-1"></a><span class="do">## 11           5     2   646  690       44 1688.9012 545.7763  1023.0553</span></span>
<span id="cb27-13"><a href="#cb27-13" tabindex="-1"></a><span class="do">## 12           6     1   197  247       50  828.6306 532.1597   194.2109</span></span>
<span id="cb27-14"><a href="#cb27-14" tabindex="-1"></a><span class="do">## 13           6     2   590  627       37  189.2387 524.2148   865.8235</span></span>
<span id="cb27-15"><a href="#cb27-15" tabindex="-1"></a><span class="do">## 14           7     1   174  224       50  746.4592 532.5643   238.6413</span></span>
<span id="cb27-16"><a href="#cb27-16" tabindex="-1"></a><span class="do">## 15           8     1   174  237       63  869.1958 545.3931   205.9854</span></span>
<span id="cb27-17"><a href="#cb27-17" tabindex="-1"></a><span class="do">## 16           8     2   564  664      100  162.7739 512.4705  1644.4917</span></span>
<span id="cb27-18"><a href="#cb27-18" tabindex="-1"></a><span class="do">## 17           9     1   170  227       57  880.2617 546.0806   205.5746</span></span>
<span id="cb27-19"><a href="#cb27-19" tabindex="-1"></a><span class="do">## 18           9     2   474  564       90  216.2176 517.2547  1621.2220</span></span>
<span id="cb27-20"><a href="#cb27-20" tabindex="-1"></a><span class="do">## 19          10     1   194  254       60  845.9267 539.5713   226.3948</span></span>
<span id="cb27-21"><a href="#cb27-21" tabindex="-1"></a><span class="do">## 20          10     2   530  624       94  180.4137 519.7535  1595.2826</span></span>
<span id="cb27-22"><a href="#cb27-22" tabindex="-1"></a><span class="do">##    terminal_y mean_velocity peak_velocity</span></span>
<span id="cb27-23"><a href="#cb27-23" tabindex="-1"></a><span class="do">## 1    494.6964      272.5147      467.6514</span></span>
<span id="cb27-24"><a href="#cb27-24" tabindex="-1"></a><span class="do">## 2    481.3370      362.4432      625.5313</span></span>
<span id="cb27-25"><a href="#cb27-25" tabindex="-1"></a><span class="do">## 3    513.4092      288.7795      438.2568</span></span>
<span id="cb27-26"><a href="#cb27-26" tabindex="-1"></a><span class="do">## 4    514.5291      395.9804      681.8466</span></span>
<span id="cb27-27"><a href="#cb27-27" tabindex="-1"></a><span class="do">## 5    517.6894      311.9050      487.7608</span></span>
<span id="cb27-28"><a href="#cb27-28" tabindex="-1"></a><span class="do">## 6    571.9000      237.5178      343.4771</span></span>
<span id="cb27-29"><a href="#cb27-29" tabindex="-1"></a><span class="do">## 7    558.7318      289.8878      429.8076</span></span>
<span id="cb27-30"><a href="#cb27-30" tabindex="-1"></a><span class="do">## 8    517.7416      321.6201      504.1717</span></span>
<span id="cb27-31"><a href="#cb27-31" tabindex="-1"></a><span class="do">## 9    545.7368      322.5088      550.1424</span></span>
<span id="cb27-32"><a href="#cb27-32" tabindex="-1"></a><span class="do">## 10   541.0273      310.0758      476.9325</span></span>
<span id="cb27-33"><a href="#cb27-33" tabindex="-1"></a><span class="do">## 11   527.7667      373.8080      574.9975</span></span>
<span id="cb27-34"><a href="#cb27-34" tabindex="-1"></a><span class="do">## 12   524.7652      314.3620      462.7681</span></span>
<span id="cb27-35"><a href="#cb27-35" tabindex="-1"></a><span class="do">## 13   511.5511      446.6401      654.1694</span></span>
<span id="cb27-36"><a href="#cb27-36" tabindex="-1"></a><span class="do">## 14   526.0246      251.9393      359.9658</span></span>
<span id="cb27-37"><a href="#cb27-37" tabindex="-1"></a><span class="do">## 15   520.0820      263.1169      421.9078</span></span>
<span id="cb27-38"><a href="#cb27-38" tabindex="-1"></a><span class="do">## 16   553.6281      370.0669      675.9970</span></span>
<span id="cb27-39"><a href="#cb27-39" tabindex="-1"></a><span class="do">## 17   532.1546      294.4052      473.1296</span></span>
<span id="cb27-40"><a href="#cb27-40" tabindex="-1"></a><span class="do">## 18   545.1010      390.8524      664.2136</span></span>
<span id="cb27-41"><a href="#cb27-41" tabindex="-1"></a><span class="do">## 19   524.6715      258.9834      400.2764</span></span>
<span id="cb27-42"><a href="#cb27-42" tabindex="-1"></a><span class="do">## 20   557.3451      377.0585      673.8068</span></span></code></pre></div>
<p>Saccadic eye movements can be plotted alongside other data using the <code><a href="reference/plot_spatial.html">plot_spatial()</a></code> function:</p>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">t_smooth</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">t_smooth</span>, <span class="va">trial</span> <span class="op">==</span> <span class="fl">8</span><span class="op">)</span></span>
<span></span>
<span><span class="va">t_fix</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/fixation_dispersion.html">fixation_dispersion</a></span><span class="op">(</span><span class="va">t_smooth</span>, disp_tol <span class="op">=</span> <span class="fl">100</span>, min_dur <span class="op">=</span> <span class="fl">150</span><span class="op">)</span></span>
<span></span>
<span><span class="va">t_sac</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/saccade_VTI.html">saccade_VTI</a></span><span class="op">(</span><span class="va">t_smooth</span>, sample_rate <span class="op">=</span> <span class="fl">300</span>, threshold <span class="op">=</span> <span class="fl">100</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="reference/plot_spatial.html">plot_spatial</a></span><span class="op">(</span>raw_data <span class="op">=</span> <span class="va">t_smooth</span>, fix_data <span class="op">=</span> <span class="va">t_fix</span>, sac_data <span class="op">=</span> <span class="va">t_sac</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/unnamed-chunk-19-1.png"><!-- --></p>
</div>
</div>
</div>

  </main><aside class="col-md-3"><div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="https://www.r-project.org/Licenses/GPL-3" class="external-link">GPL-3</a></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing eyetools</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Beesley Tom <br><small class="roles"> Author, maintainer </small>  </li>
<li>Ivory Matthew <br><small class="roles"> Author </small>  </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental" class="external-link"><img src="https://img.shields.io/badge/lifecycle-experimental-orange.svg" alt="Lifecycle: experimental"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Beesley Tom, Ivory Matthew.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
